@inherits LayoutComponentBase
@using Herta.Components.Shared

@inject NavigationManager NavigationManager

<div>
    <RadzenLayout>
        <AuthorizeView>
            <Authorized>
                <Menu></Menu>
                <RadzenBody class="rz-p-sm-4" Style="display: flex;flex-direction: column;justify-content: space-between;">
                    <div class="rz-p-4">
                        @Body
                    </div>
                    <RadzenFooter>
                        <Footer></Footer>
                    </RadzenFooter>
                </RadzenBody>
            </Authorized>
            <NotAuthorized>
                <RadzenBody not-authorized>
                    @Body
                </RadzenBody>
                
                <svg id="sw-js-blob-svg1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="position: absolute;z-index: 2;">
                    <defs>
                        <linearGradient id="sw-gradient1" x1="0" x2="1" y1="1" y2="0">
                            <stop id="stop1" stop-color="#d4d1f0" offset="0%"></stop>
                            <stop id="stop2" stop-color="#d4d1f0" offset="100%"></stop>
                        </linearGradient>
                    </defs>
                    <path fill="url(#sw-gradient1)"
                          d="M16,-28.7C18.9,-26,18.2,-18.1,20.9,-12.4C23.6,-6.7,29.7,-3.4,31.6,1.1C33.4,5.5,31,11,28.9,17.8C26.9,24.6,25.2,32.7,20.5,35.3C15.7,37.8,7.9,34.8,2.5,30.5C-2.8,26.1,-5.7,20.5,-12.9,19.3C-20.1,18.2,-31.6,21.6,-35.4,19.1C-39.2,16.6,-35.2,8.3,-34.5,0.4C-33.8,-7.5,-36.3,-14.9,-34.4,-20.7C-32.5,-26.5,-26.2,-30.5,-19.8,-31.2C-13.3,-31.8,-6.7,-29.1,-0.1,-29C6.5,-28.9,13.1,-31.5,16,-28.7Z"
                          width="100%"
                          height="100%"
                          stroke-width="0"
                          style="transform: translate(55px, 11px) rotate(100deg);transition: all 0.3s ease 0s;"
                          stroke="url(#sw-gradient1)"></path>
                </svg>

                <svg id="sw-js-blob-svg2" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="position: absolute;z-index: 1;">
                    <defs>
                        <linearGradient id="sw-gradient2" x1="0" x2="1" y1="1" y2="0">
                            <stop id="stop1" stop-color="#daf0d1" offset="0%"></stop>
                            <stop id="stop2" stop-color="#daf0d1" offset="100%"></stop>
                        </linearGradient>
                    </defs>
                    <path fill="url(#sw-gradient2)"
                          d="M16,-28.7C18.9,-26,18.2,-18.1,20.9,-12.4C23.6,-6.7,29.7,-3.4,31.6,1.1C33.4,5.5,31,11,28.9,17.8C26.9,24.6,25.2,32.7,20.5,35.3C15.7,37.8,7.9,34.8,2.5,30.5C-2.8,26.1,-5.7,20.5,-12.9,19.3C-20.1,18.2,-31.6,21.6,-35.4,19.1C-39.2,16.6,-35.2,8.3,-34.5,0.4C-33.8,-7.5,-36.3,-14.9,-34.4,-20.7C-32.5,-26.5,-26.2,-30.5,-19.8,-31.2C-13.3,-31.8,-6.7,-29.1,-0.1,-29C6.5,-28.9,13.1,-31.5,16,-28.7Z"
                          width="100%"
                          height="100%"
                          stroke-width="0"
                          style="transform: translate(-8px, 48px) rotate(-10deg);transition: all 0.3s ease 0s;"
                          stroke="url(#sw-gradient2)"></path>
                </svg>
                
                <svg id="sw-js-blob-svg3" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="position: absolute;z-index: 1;">
                    <defs>
                        <linearGradient id="sw-gradient3" x1="0" x2="1" y1="1" y2="0">
                            <stop id="stop1" stop-color="#f0d1e7" offset="0%"></stop>
                            <stop id="stop2" stop-color="#f0d1e7" offset="100%"></stop>
                        </linearGradient>
                    </defs>
                    <path fill="url(#sw-gradient3)"
                          d="M16,-28.7C18.9,-26,18.2,-18.1,20.9,-12.4C23.6,-6.7,29.7,-3.4,31.6,1.1C33.4,5.5,31,11,28.9,17.8C26.9,24.6,25.2,32.7,20.5,35.3C15.7,37.8,7.9,34.8,2.5,30.5C-2.8,26.1,-5.7,20.5,-12.9,19.3C-20.1,18.2,-31.6,21.6,-35.4,19.1C-39.2,16.6,-35.2,8.3,-34.5,0.4C-33.8,-7.5,-36.3,-14.9,-34.4,-20.7C-32.5,-26.5,-26.2,-30.5,-19.8,-31.2C-13.3,-31.8,-6.7,-29.1,-0.1,-29C6.5,-28.9,13.1,-31.5,16,-28.7Z"
                          width="100%"
                          height="100%"
                          stroke-width="0"
                          style="transform: translate(105px, 54px) rotate(111deg);transition: all 0.3s ease 0s;"
                          stroke="url(#sw-gradient3)"></path>
                </svg>
            </NotAuthorized>
        </AuthorizeView>
    </RadzenLayout>
</div>

@code {
    
    [CascadingParameter] HttpContext? HttpContext { get; set; }

    protected override void OnParametersSet()
    {
        if (HttpContext is null)
        {
            // If this code runs, we're currently rendering in interactive mode, so there is no HttpContext.
            // The identity pages need to set cookies, so they require an HttpContext. To achieve this we
            // must transition back from interactive mode to a server-rendered page.
            NavigationManager.Refresh(forceReload: true);
        }
    }

}